<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recess ‚Äî Senior Accountant Live Test | Interviewer Dashboard</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg: #0d1117; --sidebar-bg: #161b22; --panel: #1c2128; --border: #30363d;
  --text: #e6edf3; --muted: #8b949e; --green: #3fb950; --yellow: #d29922;
  --red: #f85149; --blue: #58a6ff; --purple: #bc8cff; --orange: #f0883e;
  --brand: #6366f1;
}
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

/* HEADER */
header { background: var(--sidebar-bg); border-bottom: 1px solid var(--border); padding: 10px 20px; display: flex; align-items: center; gap: 14px; flex-shrink: 0; }
.brand { display: flex; align-items: center; gap: 10px; }
.brand-logo { width: 30px; height: 30px; background: var(--brand); border-radius: 7px; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 800; color: white; }
.brand-text { font-size: 14px; font-weight: 600; }
.brand-sep { color: var(--border); font-size: 18px; margin: 0 2px; }
.header-title { font-size: 13px; color: var(--muted); }
.header-right { margin-left: auto; display: flex; align-items: center; gap: 12px; }
.candidate-field { display: flex; align-items: center; gap: 8px; }
.candidate-field label { font-size: 12px; color: var(--muted); white-space: nowrap; }
.candidate-field input { background: var(--panel); border: 1px solid var(--border); color: var(--text); padding: 5px 10px; border-radius: 6px; font-size: 13px; width: 180px; outline: none; }
.candidate-field input:focus { border-color: var(--brand); }
.total-clock { background: var(--panel); border: 1px solid var(--border); padding: 5px 12px; border-radius: 6px; font-size: 12px; display: flex; align-items: center; gap: 6px; }
.total-clock-time { font-family: 'SF Mono','Courier New',monospace; font-weight: 600; color: var(--blue); }
.total-clock-label { font-size: 11px; color: var(--muted); }

/* LAYOUT */
.app-body { display: flex; flex: 1; overflow: hidden; }

/* SIDEBAR */
.sidebar { width: 210px; background: var(--sidebar-bg); border-right: 1px solid var(--border); padding: 12px 10px; display: flex; flex-direction: column; gap: 3px; flex-shrink: 0; overflow-y: auto; }
.sidebar-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); padding: 8px 10px 4px; }
.sec-nav-btn { display: flex; align-items: center; gap: 10px; padding: 9px 10px; border-radius: 8px; cursor: pointer; border: none; background: transparent; color: var(--text); text-align: left; width: 100%; transition: all 0.15s; }
.sec-nav-btn:hover { background: rgba(255,255,255,0.05); }
.sec-nav-btn.active { background: rgba(99,102,241,0.15); border: 1px solid rgba(99,102,241,0.35); }
.sec-nav-btn.done .sec-circle { background: var(--green); color: #0d1117; }
.sec-circle { width: 22px; height: 22px; border-radius: 50%; background: var(--panel); font-size: 11px; font-weight: 700; display: flex; align-items: center; justify-content: center; flex-shrink: 0; border: 1px solid var(--border); }
.sec-nav-name { font-size: 12px; font-weight: 500; }
.sec-nav-meta { font-size: 10px; color: var(--muted); margin-top: 1px; }
.sidebar-divider { border: none; border-top: 1px solid var(--border); margin: 8px 0; }
.sidebar-tip { background: rgba(99,102,241,0.08); border: 1px solid rgba(99,102,241,0.2); border-radius: 8px; padding: 10px; font-size: 11px; color: var(--muted); line-height: 1.5; margin-top: auto; }
.sidebar-tip strong { color: var(--text); display: block; margin-bottom: 4px; }

/* MAIN CONTENT */
.main-content { flex: 1; overflow-y: auto; padding: 16px; display: flex; gap: 16px; min-width: 0; }
.section-area { flex: 1; display: flex; flex-direction: column; gap: 12px; min-width: 0; }
.section-view { display: none; flex-direction: column; gap: 12px; }
.section-view.active { display: flex; }

/* TIMER CARD */
.timer-card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 18px 22px; display: flex; align-items: center; gap: 20px; }
.timer-big { font-size: 56px; font-family: 'SF Mono','Courier New',monospace; font-weight: 700; letter-spacing: -2px; min-width: 160px; text-align: center; transition: color 0.3s; }
.timer-big.warn { color: var(--yellow); }
.timer-big.urgent { color: var(--red); animation: blink 1s step-end infinite; }
@keyframes blink { 50% { opacity: 0.4; } }
.timer-meta { flex: 1; }
.timer-sec-name { font-size: 18px; font-weight: 600; margin-bottom: 3px; }
.timer-sec-sub { font-size: 12px; color: var(--muted); margin-bottom: 12px; }
.timer-controls { display: flex; gap: 8px; }
.timer-progress { height: 3px; background: var(--border); border-radius: 2px; margin-top: 10px; overflow: hidden; }
.timer-progress-fill { height: 100%; background: var(--brand); transition: width 1s linear; border-radius: 2px; }

/* BUTTONS */
.btn { padding: 7px 14px; border-radius: 7px; border: none; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.15s; white-space: nowrap; }
.btn-start { background: var(--green); color: #0d1117; }
.btn-start:hover { opacity: 0.85; }
.btn-pause { background: var(--yellow); color: #0d1117; display: none; }
.btn-pause:hover { opacity: 0.85; }
.btn-reset { background: transparent; color: var(--muted); border: 1px solid var(--border); }
.btn-reset:hover { color: var(--text); border-color: var(--text); }
.btn-next { background: var(--brand); color: white; }
.btn-next:hover { opacity: 0.85; }

/* ACCORDION */
.acc-card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
.acc-header { padding: 12px 18px; display: flex; align-items: center; gap: 10px; cursor: pointer; user-select: none; transition: background 0.15s; }
.acc-header:hover { background: rgba(255,255,255,0.03); }
.acc-icon { font-size: 15px; flex-shrink: 0; }
.acc-title { font-size: 13px; font-weight: 600; flex: 1; }
.acc-badge { font-size: 10px; padding: 2px 8px; border-radius: 10px; font-weight: 600; }
.badge-blue { background: rgba(88,166,255,0.15); color: var(--blue); }
.badge-yellow { background: rgba(210,153,34,0.15); color: var(--yellow); }
.badge-red { background: rgba(248,81,73,0.15); color: var(--red); }
.badge-green { background: rgba(63,185,80,0.15); color: var(--green); }
.badge-purple { background: rgba(188,140,255,0.15); color: var(--purple); }
.acc-chevron { color: var(--muted); font-size: 11px; transition: transform 0.2s; }
.acc-chevron.open { transform: rotate(180deg); }
.acc-body { display: none; padding: 16px 18px; border-top: 1px solid var(--border); }
.acc-body.open { display: block; }

/* SCRIPT BOX */
.script-box { background: rgba(99,102,241,0.07); border: 1px solid rgba(99,102,241,0.2); border-radius: 8px; padding: 14px 16px; font-size: 13px; line-height: 1.75; font-style: italic; }
.script-box em { font-style: normal; color: var(--blue); font-weight: 500; }
.script-instr { background: rgba(63,185,80,0.07); border: 1px solid rgba(63,185,80,0.2); border-radius: 8px; padding: 12px 14px; font-size: 12px; color: var(--green); margin-top: 10px; display: flex; gap: 8px; }

/* OBSERVE LIST */
.observe-list { list-style: none; display: flex; flex-direction: column; gap: 8px; }
.observe-list li { display: flex; gap: 10px; font-size: 13px; line-height: 1.5; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.04); }
.observe-list li:last-child { border-bottom: none; }
.obs-icon { flex-shrink: 0; }
.flag-box { background: rgba(210,153,34,0.1); border-left: 3px solid var(--yellow); border-radius: 0 6px 6px 0; padding: 10px 14px; font-size: 12px; margin-top: 10px; line-height: 1.5; }
.flag-box strong { color: var(--yellow); }

/* INBOX TABLE */
.inbox-table { width: 100%; border-collapse: collapse; font-size: 12px; }
.inbox-table th { background: rgba(255,255,255,0.04); padding: 7px 10px; text-align: left; font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; color: var(--muted); }
.inbox-table td { padding: 8px 10px; border-top: 1px solid rgba(255,255,255,0.05); vertical-align: top; }
.inbox-table tr.p-critical td { background: rgba(248,81,73,0.06); }
.inbox-table tr.p-high td { background: rgba(210,153,34,0.04); }
.inbox-item-source { font-size: 10px; color: var(--muted); margin-bottom: 2px; }
.priority-tag { font-size: 10px; font-weight: 700; padding: 2px 7px; border-radius: 4px; white-space: nowrap; }
.pt-critical { background: rgba(248,81,73,0.15); color: var(--red); }
.pt-high { background: rgba(210,153,34,0.15); color: var(--yellow); }
.pt-med { background: rgba(88,166,255,0.15); color: var(--blue); }
.pt-low { background: rgba(139,148,158,0.15); color: var(--muted); }

/* TRIAL BALANCE */
.tb-container { overflow-x: auto; }
.tb-table { width: 100%; border-collapse: collapse; font-size: 12px; font-family: 'SF Mono',monospace; }
.tb-table th { background: rgba(255,255,255,0.05); padding: 7px 12px; font-size: 10px; text-transform: uppercase; color: var(--muted); }
.tb-table th:not(:first-child) { text-align: right; }
.tb-table td { padding: 7px 12px; border-top: 1px solid rgba(255,255,255,0.05); }
.tb-table td:not(:first-child) { text-align: right; }
.tb-table .section-row td { background: rgba(99,102,241,0.1); font-size: 10px; text-transform: uppercase; color: var(--purple); letter-spacing: 0.05em; font-weight: 600; font-family: -apple-system, sans-serif; }
.tb-table .error-row td { background: rgba(248,81,73,0.06); }
.tb-table .ok-row td { background: rgba(63,185,80,0.05); }
.error-indicator { color: var(--red); font-size: 10px; margin-left: 4px; }
.supporting-docs { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px; }
.doc-card { background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 6px; padding: 10px; font-size: 11px; line-height: 1.5; }
.doc-card-title { font-size: 10px; text-transform: uppercase; color: var(--muted); margin-bottom: 4px; }
.doc-has-error { border-left: 3px solid var(--red) !important; }
.doc-is-ok { border-left: 3px solid var(--green) !important; }

/* ANSWER KEY */
.ak-locked { text-align: center; padding: 20px; }
.ak-locked p { color: var(--muted); font-size: 13px; margin-bottom: 12px; }
.btn-reveal { background: rgba(210,153,34,0.15); color: var(--yellow); border: 1px solid rgba(210,153,34,0.3); }
.btn-reveal:hover { background: rgba(210,153,34,0.25); }
.ak-content { display: none; }
.ak-content.revealed { display: block; }
.ak-item { border: 1px solid var(--border); border-radius: 8px; margin-bottom: 10px; overflow: hidden; }
.ak-item-header { display: flex; align-items: center; gap: 10px; padding: 10px 14px; background: rgba(255,255,255,0.03); }
.ak-num { width: 22px; height: 22px; border-radius: 50%; background: var(--brand); font-size: 11px; font-weight: 700; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.ak-error-name { font-size: 13px; font-weight: 600; flex: 1; }
.ak-item-body { padding: 10px 14px; font-size: 12px; line-height: 1.6; }
.ak-je { font-family: 'SF Mono',monospace; font-size: 11px; background: rgba(63,185,80,0.08); border: 1px solid rgba(63,185,80,0.2); border-radius: 6px; padding: 8px 12px; margin-top: 8px; color: var(--green); }
.ak-why { color: var(--muted); margin-bottom: 4px; }
.ak-note { background: rgba(88,166,255,0.08); border: 1px solid rgba(88,166,255,0.2); border-radius: 6px; padding: 8px 12px; font-size: 12px; color: var(--blue); margin-top: 8px; }
.errors-found-counter { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
.errors-btns { display: flex; gap: 4px; }
.error-count-btn { width: 28px; height: 28px; border-radius: 6px; border: 1px solid var(--border); background: transparent; color: var(--muted); cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.15s; }
.error-count-btn.active { background: var(--brand); color: white; border-color: var(--brand); }
.errors-label { font-size: 12px; color: var(--muted); }

/* AI FLUENCY */
.discussion-qs { display: flex; flex-direction: column; gap: 8px; }
.dq { background: rgba(188,140,255,0.07); border: 1px solid rgba(188,140,255,0.2); border-radius: 8px; padding: 12px 14px; font-size: 13px; line-height: 1.5; }
.dq::before { content: 'üí¨ '; }
.ai-signals { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 8px; }
.signal-box { border-radius: 8px; padding: 12px; font-size: 12px; line-height: 1.5; }
.signal-strong { background: rgba(63,185,80,0.08); border: 1px solid rgba(63,185,80,0.2); }
.signal-weak { background: rgba(248,81,73,0.08); border: 1px solid rgba(248,81,73,0.2); }
.signal-title { font-weight: 600; margin-bottom: 6px; }
.signal-strong .signal-title { color: var(--green); }
.signal-weak .signal-title { color: var(--red); }
.signal-list { list-style: none; display: flex; flex-direction: column; gap: 4px; }
.signal-list li::before { content: '‚Ä¢ '; color: var(--muted); }

/* SOP EVALUATION */
.sop-eval-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.sop-eval-item { background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 8px; padding: 12px; font-size: 12px; line-height: 1.5; }
.sop-eval-title { font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; color: var(--muted); margin-bottom: 6px; font-weight: 700; }

/* SCORE PANEL */
.score-panel { width: 270px; flex-shrink: 0; display: flex; flex-direction: column; gap: 12px; }
.score-card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 16px; }
.score-card-title { font-size: 10px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted); margin-bottom: 14px; }
.score-row { margin-bottom: 14px; }
.score-row-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 6px; }
.score-row-name { font-size: 12px; font-weight: 500; }
.score-row-weight { font-size: 10px; color: var(--muted); }
.score-btns { display: flex; gap: 4px; }
.sc-btn { flex: 1; padding: 6px 0; border-radius: 6px; border: 1px solid var(--border); background: transparent; color: var(--muted); cursor: pointer; font-size: 13px; font-weight: 700; transition: all 0.15s; }
.sc-btn:hover { border-color: var(--text); color: var(--text); }
.sc-btn.sel-1 { background: rgba(248,81,73,0.2); color: var(--red); border-color: var(--red); }
.sc-btn.sel-2 { background: rgba(210,153,34,0.2); color: var(--yellow); border-color: var(--yellow); }
.sc-btn.sel-3 { background: rgba(88,166,255,0.2); color: var(--blue); border-color: var(--blue); }
.sc-btn.sel-4 { background: rgba(63,185,80,0.2); color: var(--green); border-color: var(--green); }
.score-row-rubric { font-size: 10px; color: var(--muted); margin-top: 4px; min-height: 14px; padding: 2px 0; }

/* TOTAL SCORE */
.total-score-card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center; }
.total-score-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted); margin-bottom: 8px; }
.total-score-num { font-size: 52px; font-weight: 800; font-family: monospace; line-height: 1; margin-bottom: 4px; }
.total-score-max { font-size: 12px; color: var(--muted); margin-bottom: 12px; }
.decision-badge { display: inline-block; padding: 6px 16px; border-radius: 20px; font-size: 13px; font-weight: 700; margin-bottom: 8px; }
.d-strong { background: rgba(63,185,80,0.15); color: var(--green); border: 1px solid rgba(63,185,80,0.3); }
.d-hire { background: rgba(88,166,255,0.15); color: var(--blue); border: 1px solid rgba(88,166,255,0.3); }
.d-border { background: rgba(210,153,34,0.15); color: var(--yellow); border: 1px solid rgba(210,153,34,0.3); }
.d-nohire { background: rgba(248,81,73,0.15); color: var(--red); border: 1px solid rgba(248,81,73,0.3); }
.d-pending { background: rgba(139,148,158,0.12); color: var(--muted); border: 1px solid rgba(139,148,158,0.2); }
.decision-sub { font-size: 11px; color: var(--muted); }
.critical-flag { background: rgba(248,81,73,0.1); border: 1px solid rgba(248,81,73,0.3); border-radius: 6px; padding: 8px 10px; font-size: 11px; color: var(--red); margin-top: 8px; display: none; }

/* NOTES */
.notes-card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 14px; flex: 1; display: flex; flex-direction: column; }
.notes-card h4 { font-size: 10px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted); margin-bottom: 8px; }
.notes-card textarea { flex: 1; width: 100%; background: var(--bg); border: 1px solid var(--border); color: var(--text); padding: 8px 10px; border-radius: 6px; font-size: 11px; resize: none; font-family: inherit; line-height: 1.6; min-height: 100px; outline: none; }
.notes-card textarea:focus { border-color: var(--brand); }
.notes-card textarea::placeholder { color: var(--muted); }

/* TOAST */
#toast { position: fixed; top: 60px; left: 50%; transform: translateX(-50%); background: var(--yellow); color: #0d1117; padding: 10px 20px; border-radius: 8px; font-weight: 700; font-size: 14px; z-index: 999; display: none; box-shadow: 0 4px 24px rgba(0,0,0,0.5); }

/* MODAL */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.75); display: none; align-items: center; justify-content: center; z-index: 500; }
.modal-overlay.open { display: flex; }
.modal-box { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; width: 480px; max-width: 90vw; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.6); }
.modal-header { padding: 18px 22px 14px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 10px; }
.modal-header h3 { font-size: 15px; font-weight: 700; flex: 1; }
.modal-body { padding: 20px 22px; }
.summary-candidate-name { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
.summary-timestamp { font-size: 11px; color: var(--muted); margin-bottom: 18px; }
.summary-rows { display: flex; flex-direction: column; gap: 6px; margin-bottom: 16px; }
.summary-row { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; background: var(--bg); border-radius: 8px; font-size: 13px; }
.summary-row-name { color: var(--muted); }
.summary-row-score { font-weight: 700; font-family: monospace; font-size: 14px; }
.sr-1 { color: var(--red); } .sr-2 { color: var(--yellow); } .sr-3 { color: var(--blue); } .sr-4 { color: var(--green); } .sr-none { color: var(--muted); }
.summary-total-row { display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; border-radius: 10px; border: 1px solid var(--border); margin-bottom: 14px; }
.summary-total-label { font-size: 13px; font-weight: 600; }
.summary-total-score { font-size: 28px; font-weight: 800; font-family: monospace; }
.summary-notes-preview { background: var(--bg); border-radius: 8px; padding: 10px 12px; font-size: 12px; color: var(--muted); line-height: 1.5; max-height: 70px; overflow: hidden; border: 1px solid var(--border); margin-bottom: 16px; }
.modal-actions { display: flex; gap: 8px; }
.btn-screenshot { background: rgba(88,166,255,0.15); color: var(--blue); border: 1px solid rgba(88,166,255,0.3); flex: 1; }
.btn-confirm-reset { background: var(--green); color: #0d1117; flex: 1; }
.btn-cancel-modal { background: transparent; color: var(--muted); border: 1px solid var(--border); }
.modal-divider { border: none; border-top: 1px solid var(--border); margin: 14px 0; }

/* NEW CANDIDATE BUTTON */
.btn-new-candidate { background: rgba(63,185,80,0.12); color: var(--green); border: 1px solid rgba(63,185,80,0.3); padding: 5px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer; white-space: nowrap; transition: all 0.15s; }
.btn-new-candidate:hover { background: rgba(63,185,80,0.22); }

/* CANDIDATES VIEW */
.candidates-toolbar { display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px; }
.candidates-toolbar h2 { font-size: 16px; font-weight: 700; }
.candidates-stats { display: flex; gap: 12px; margin-bottom: 16px; }
.cstat { background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 12px 18px; flex: 1; text-align: center; }
.cstat-num { font-size: 26px; font-weight: 800; font-family: monospace; }
.cstat-label { font-size: 11px; color: var(--muted); margin-top: 2px; text-transform: uppercase; letter-spacing: 0.05em; }
.candidates-empty { text-align: center; padding: 48px 20px; color: var(--muted); background: var(--panel); border: 1px dashed var(--border); border-radius: 12px; font-size: 13px; line-height: 1.7; }
.candidates-empty .empty-icon { font-size: 36px; display: block; margin-bottom: 12px; }
.candidates-table-wrap { overflow-x: auto; }
.candidates-table { width: 100%; border-collapse: collapse; font-size: 13px; min-width: 700px; }
.candidates-table th { background: var(--panel); border-bottom: 2px solid var(--border); padding: 10px 12px; text-align: left; font-size: 10px; text-transform: uppercase; letter-spacing: 0.07em; color: var(--muted); white-space: nowrap; }
.candidates-table th.col-score { text-align: center; }
.candidates-table td { padding: 10px 12px; border-bottom: 1px solid rgba(255,255,255,0.05); vertical-align: middle; }
.candidates-table tr:hover td { background: rgba(255,255,255,0.02); }
.candidates-table tr.best-overall td { background: rgba(63,185,80,0.05); }
.cand-name { font-weight: 600; font-size: 13px; }
.cand-date { font-size: 10px; color: var(--muted); margin-top: 2px; }
.score-pill { display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 6px; font-weight: 700; font-size: 13px; margin: auto; }
.sp-1 { background: rgba(248,81,73,0.2); color: var(--red); }
.sp-2 { background: rgba(210,153,34,0.2); color: var(--yellow); }
.sp-3 { background: rgba(88,166,255,0.2); color: var(--blue); }
.sp-4 { background: rgba(63,185,80,0.2); color: var(--green); }
.sp-none { background: rgba(139,148,158,0.1); color: var(--muted); font-size: 11px; }
.col-score { text-align: center; }
.weighted-score { font-size: 15px; font-weight: 800; font-family: monospace; }
.ws-strong { color: var(--green); } .ws-hire { color: var(--blue); } .ws-border { color: var(--yellow); } .ws-nohire { color: var(--red); } .ws-none { color: var(--muted); }
.cand-decision-badge { font-size: 10px; font-weight: 700; padding: 3px 8px; border-radius: 10px; white-space: nowrap; }
.cb-strong { background: rgba(63,185,80,0.15); color: var(--green); }
.cb-hire { background: rgba(88,166,255,0.15); color: var(--blue); }
.cb-border { background: rgba(210,153,34,0.15); color: var(--yellow); }
.cb-nohire { background: rgba(248,81,73,0.15); color: var(--red); }
.cb-incomplete { background: rgba(139,148,158,0.12); color: var(--muted); }
.cand-notes-toggle { background: transparent; border: 1px solid var(--border); color: var(--muted); padding: 3px 8px; border-radius: 5px; cursor: pointer; font-size: 11px; transition: all 0.15s; }
.cand-notes-toggle:hover { color: var(--text); border-color: var(--text); }
.cand-delete { background: transparent; border: none; color: var(--muted); cursor: pointer; padding: 4px 6px; border-radius: 5px; font-size: 14px; transition: all 0.15s; }
.cand-delete:hover { color: var(--red); background: rgba(248,81,73,0.1); }
.notes-row td { background: rgba(255,255,255,0.02) !important; padding: 0 !important; }
.notes-row-inner { padding: 10px 12px 14px 14px; font-size: 12px; color: var(--muted); line-height: 1.6; border-left: 3px solid var(--brand); margin: 0 0 0 12px; display: none; }
.notes-row-inner.open { display: block; }
.btn-clear-all { background: rgba(248,81,73,0.1); color: var(--red); border: 1px solid rgba(248,81,73,0.25); padding: 5px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer; }
.btn-clear-all:hover { background: rgba(248,81,73,0.2); }
.top-badge { font-size: 9px; background: var(--green); color: #0d1117; padding: 1px 5px; border-radius: 3px; font-weight: 700; margin-left: 6px; vertical-align: middle; }

/* RUBRIC */
.rubric-ref { font-size: 10px; }
.rubric-ref div { display: flex; gap: 6px; padding: 3px 0; border-bottom: 1px solid rgba(255,255,255,0.04); }
.rubric-ref div:last-child { border: none; }
.rr-score { width: 14px; font-weight: 700; flex-shrink: 0; }
.rr-4 { color: var(--green); } .rr-3 { color: var(--blue); } .rr-2 { color: var(--yellow); } .rr-1 { color: var(--red); }

::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
</style>
</head>
<body>

<!-- MODAL -->
<div class="modal-overlay" id="newCandidateModal">
  <div class="modal-box">
    <div class="modal-header"><span style="font-size:18px">üìã</span><h3>Candidate Summary</h3></div>
    <div class="modal-body">
      <div class="summary-candidate-name" id="sum-name">‚Äî</div>
      <div class="summary-timestamp" id="sum-time"></div>
      <div class="summary-rows">
        <div class="summary-row"><span class="summary-row-name">1 ¬∑ Inbox Triage (20%)</span><span class="summary-row-score" id="sum-s1">‚Äî</span></div>
        <div class="summary-row"><span class="summary-row-name">2 ¬∑ Asana Workflow (15%)</span><span class="summary-row-score" id="sum-s2">‚Äî</span></div>
        <div class="summary-row"><span class="summary-row-name">3 ¬∑ SOP Writing (20%)</span><span class="summary-row-score" id="sum-s3">‚Äî</span></div>
        <div class="summary-row"><span class="summary-row-name">4 ¬∑ Close Package (30%)</span><span class="summary-row-score" id="sum-s4">‚Äî</span></div>
        <div class="summary-row"><span class="summary-row-name">5 ¬∑ AI Fluency (15%)</span><span class="summary-row-score" id="sum-s5">‚Äî</span></div>
      </div>
      <div class="summary-total-row">
        <div>
          <div class="summary-total-label">Weighted Score</div>
          <div style="font-size:11px;color:var(--muted)" id="sum-decision-sub">‚Äî</div>
        </div>
        <div><span class="summary-total-score" id="sum-total">‚Äî</span><span style="font-size:13px;color:var(--muted)"> / 4.0</span></div>
      </div>
      <div style="font-size:11px;color:var(--muted);font-weight:600;text-transform:uppercase;letter-spacing:0.06em;margin-bottom:6px">Interview Notes</div>
      <div class="summary-notes-preview" id="sum-notes">No notes recorded.</div>
      <hr class="modal-divider">
      <div style="font-size:12px;color:var(--yellow);margin-bottom:12px">‚ö†Ô∏è Screenshot or copy scores before resetting ‚Äî all data will be cleared.</div>
      <div class="modal-actions">
        <button class="btn btn-cancel-modal" onclick="closeNewCandidateModal()">Cancel</button>
        <button class="btn btn-screenshot" onclick="window.print()">üñ® Print / Save PDF</button>
        <button class="btn btn-confirm-reset" onclick="confirmReset()">‚úì Reset for Next Candidate</button>
      </div>
    </div>
  </div>
</div>

<div id="toast">‚è∞ 1 Minute Remaining!</div>

<!-- HEADER -->
<header>
  <div class="brand">
    <div class="brand-logo">R</div>
    <div><div class="brand-text">Recess</div></div>
  </div>
  <span class="brand-sep">/</span>
  <div class="header-title">Senior Accountant Live Test ‚Äî Interviewer Dashboard</div>
  <div class="header-right">
    <div class="candidate-field">
      <label>Candidate:</label>
      <input type="text" id="candidateName" placeholder="Enter candidate name‚Ä¶" />
    </div>
    <button class="btn-new-candidate" onclick="openNewCandidateModal()">Ôºã New Candidate</button>
    <div class="total-clock">
      <span>‚è±</span>
      <span class="total-clock-time" id="totalClock">00:00</span>
      <span class="total-clock-label">elapsed</span>
    </div>
  </div>
</header>

<div class="app-body">
  <!-- SIDEBAR -->
  <nav class="sidebar">
    <div class="sidebar-label">Sections</div>
    <button class="sec-nav-btn active" id="nav-1" onclick="goSection(1)">
      <div class="sec-circle" id="circle-1">1</div>
      <div><div class="sec-nav-name">Inbox Triage</div><div class="sec-nav-meta">10 min ¬∑ 20% weight</div></div>
    </button>
    <button class="sec-nav-btn" id="nav-2" onclick="goSection(2)">
      <div class="sec-circle" id="circle-2">2</div>
      <div><div class="sec-nav-name">Asana Workflow</div><div class="sec-nav-meta">8 min ¬∑ 15% weight</div></div>
    </button>
    <button class="sec-nav-btn" id="nav-3" onclick="goSection(3)">
      <div class="sec-circle" id="circle-3">3</div>
      <div><div class="sec-nav-name">SOP Writing</div><div class="sec-nav-meta">12 min ¬∑ 20% weight</div></div>
    </button>
    <button class="sec-nav-btn" id="nav-4" onclick="goSection(4)">
      <div class="sec-circle" id="circle-4">4</div>
      <div><div class="sec-nav-name">Close Package</div><div class="sec-nav-meta">15 min ¬∑ 30% weight</div></div>
    </button>
    <button class="sec-nav-btn" id="nav-5" onclick="goSection(5)">
      <div class="sec-circle" id="circle-5">5</div>
      <div><div class="sec-nav-name">AI Fluency</div><div class="sec-nav-meta">7 min ¬∑ 15% weight</div></div>
    </button>
    <button class="sec-nav-btn" id="nav-score" onclick="goSection('score')">
      <div class="sec-circle" style="background:rgba(99,102,241,0.2);border-color:var(--brand)">üìä</div>
      <div><div class="sec-nav-name">Final Score</div><div class="sec-nav-meta">Summary & decision</div></div>
    </button>
    <button class="sec-nav-btn" id="nav-candidates" onclick="goSection('candidates')">
      <div class="sec-circle" style="background:rgba(240,136,62,0.2);border-color:var(--orange)">üë•</div>
      <div><div class="sec-nav-name">All Candidates <span id="cand-count-badge" style="font-size:10px;color:var(--orange)"></span></div><div class="sec-nav-meta">History & comparison</div></div>
    </button>
    <hr class="sidebar-divider">
    <div class="sidebar-tip">
      <strong>üìã Candidate Prep Email</strong>
      Send 24‚Äì48 hrs before: "~52-min practical exercise over Google Meet. Work in a shared doc. Use any tools you'd normally use, including AI."
    </div>
  </nav>

  <div class="main-content">
    <div class="section-area">

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SECTION 1: INBOX TRIAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="section-view active" id="sec-1">
        <div class="timer-card">
          <div class="timer-big" id="timer-1">10:00</div>
          <div class="timer-meta">
            <div class="timer-sec-name">Section 1 ‚Äî Monday Morning Inbox</div>
            <div class="timer-sec-sub">Organization & Prioritization ¬∑ Weight: 20%</div>
            <div class="timer-controls">
              <button class="btn btn-start" id="start-1" onclick="startTimer(1)">‚ñ∂ Start</button>
              <button class="btn btn-pause" id="pause-1" onclick="pauseTimer(1)">‚è∏ Pause</button>
              <button class="btn btn-reset" onclick="resetTimer(1)">‚Ü∫ Reset</button>
              <button class="btn btn-next" onclick="goSection(2)">Next Section ‚Üí</button>
            </div>
            <div class="timer-progress"><div class="timer-progress-fill" id="prog-1" style="width:100%"></div></div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('script-1')">
            <span class="acc-icon">üìã</span><span class="acc-title">Script ‚Äî Read Aloud to Candidate</span>
            <span class="acc-badge badge-blue">Read aloud</span><span class="acc-chevron open" id="chev-script-1">‚ñº</span>
          </div>
          <div class="acc-body open" id="acc-script-1">
            <div class="script-box">
              "You're the Senior Accountant at Recess. You've just returned from 4 days of PTO. It's <em>Monday morning at 9 AM</em> and month-end close is due <em>Wednesday EOD</em>. You have 12 items waiting for your attention.<br><br>
              Please open the candidate worksheet and do three things: <em>(1)</em> rank the items by priority, <em>(2)</em> note which you'd handle personally vs. delegate, and <em>(3)</em> briefly explain your reasoning for your <em>top 3</em> priorities. You have <em>10 minutes</em>."
            </div>
            <div class="script-instr">üí° Start the timer now. Stay quiet. Give a 1-minute verbal warning. Candidate types directly in the worksheet.</div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('obs-1')">
            <span class="acc-icon">üëÅ</span><span class="acc-title">What to Observe</span>
            <span class="acc-badge badge-yellow">Behavioral signals</span><span class="acc-chevron" id="chev-obs-1">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-obs-1">
            <ul class="observe-list">
              <li><span class="obs-icon">üîç</span> Do they scan all 12 items first, or start sorting immediately? (Scanning first = strong signal)</li>
              <li><span class="obs-icon">üéØ</span> Do they identify #3 (QBO bank feed down) and #12 ($12K discrepancy) as close-blocking top priorities?</li>
              <li><span class="obs-icon">üëë</span> Do they recognize #1 (CEO needs financials by Wed EOD) as the key deadline driving everything?</li>
              <li><span class="obs-icon">ü§ù</span> Do they delegate appropriately? (#5 petty cash ‚Üí staff, #7 HR setup ‚Üí AP clerk, #11 timesheets ‚Üí team leads)</li>
              <li><span class="obs-icon">üß†</span> Do they use a mental framework (urgent/important)? Can they articulate it?</li>
              <li><span class="obs-icon">‚ö°</span> Do they catch the dependency ‚Äî that bank feed (#3) must be fixed BEFORE they can close?</li>
            </ul>
            <div class="flag-box"><strong>üö© Red Flags:</strong> Handling items in listed order (no triage), missing #3 and #12 as blockers, not delegating anything, vague reasoning ("it seemed important").</div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('ak-1')">
            <span class="acc-icon">üîë</span><span class="acc-title">Answer Key ‚Äî Expected Priorities</span>
            <span class="acc-badge badge-red">Hidden</span><span class="acc-chevron" id="chev-ak-1">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-ak-1">
            <div class="ak-locked" id="ak-locked-1"><p>Reveal after section ends or when scoring.</p><button class="btn btn-reveal" onclick="revealAnswerKey(1)">üîì Reveal Answer Key</button></div>
            <div class="ak-content" id="ak-content-1">
              <table class="inbox-table">
                <thead><tr><th>#</th><th>Item</th><th>Priority</th><th>Handle / Delegate</th></tr></thead>
                <tbody>
                  <tr class="p-critical"><td><strong>3</strong></td><td>Bank feed in QBO stopped syncing (3 days missing)</td><td><span class="priority-tag pt-critical">üî¥ #1</span></td><td>Handle personally ‚Äî close-blocking</td></tr>
                  <tr class="p-critical"><td><strong>12</strong></td><td>$12K discrepancy in January bank reconciliation</td><td><span class="priority-tag pt-critical">üî¥ #2</span></td><td>Investigate / delegate to staff accountant with clear task</td></tr>
                  <tr class="p-critical"><td><strong>1</strong></td><td>CEO: Board meeting Thursday, needs financials by Wed EOD</td><td><span class="priority-tag pt-critical">üî¥ #3</span></td><td>Handle ‚Äî defines the close deadline</td></tr>
                  <tr class="p-high"><td><strong>2</strong></td><td>$47K invoices missing approvals, vendors calling</td><td><span class="priority-tag pt-high">üü° #4</span></td><td>Delegate to AP clerk with instructions</td></tr>
                  <tr><td><strong>6</strong></td><td>Sales VP: travel budget 200% spent (CEO asking)</td><td><span class="priority-tag pt-high">üü° #5</span></td><td>Handle ‚Äî requires financial analysis</td></tr>
                  <tr><td><strong>9</strong></td><td>Monthly 1:1 with CFO at 2 PM today</td><td><span class="priority-tag pt-med">üîµ #6</span></td><td>Handle ‚Äî use this to flag close blockers</td></tr>
                  <tr><td><strong>7</strong></td><td>New hire starting Wednesday ‚Äî payroll/QBO setup</td><td><span class="priority-tag pt-med">üîµ #7</span></td><td>Delegate to AP clerk</td></tr>
                  <tr><td><strong>8</strong></td><td>Insurance broker: $24K renewal due Friday</td><td><span class="priority-tag pt-med">üîµ #8</span></td><td>Schedule for later this week</td></tr>
                  <tr><td><strong>4</strong></td><td>External auditors: Q4 depreciation schedule by EOW</td><td><span class="priority-tag pt-low">‚ö™ #9</span></td><td>Delegate/schedule ‚Äî due EOW not today</td></tr>
                  <tr><td><strong>5</strong></td><td>Asana overdue: Petty cash reconciliation ($500)</td><td><span class="priority-tag pt-low">‚ö™ #10</span></td><td>Delegate to staff ‚Äî immaterial</td></tr>
                  <tr><td><strong>10</strong></td><td>Tax advisor: extension draft review due next Monday</td><td><span class="priority-tag pt-low">‚ö™ #11</span></td><td>Schedule for later this week</td></tr>
                  <tr><td><strong>11</strong></td><td>Three team members haven't logged hours last week</td><td><span class="priority-tag pt-low">‚ö™ #12</span></td><td>Delegate ‚Äî send a quick message</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SECTION 2: ASANA WORKFLOW ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="section-view" id="sec-2">
        <div class="timer-card">
          <div class="timer-big" id="timer-2">8:00</div>
          <div class="timer-meta">
            <div class="timer-sec-name">Section 2 ‚Äî Task & Workflow Management</div>
            <div class="timer-sec-sub">Asana Process Design ¬∑ Weight: 15%</div>
            <div class="timer-controls">
              <button class="btn btn-start" id="start-2" onclick="startTimer(2)">‚ñ∂ Start</button>
              <button class="btn btn-pause" id="pause-2" onclick="pauseTimer(2)">‚è∏ Pause</button>
              <button class="btn btn-reset" onclick="resetTimer(2)">‚Ü∫ Reset</button>
              <button class="btn btn-next" onclick="goSection(3)">Next Section ‚Üí</button>
            </div>
            <div class="timer-progress"><div class="timer-progress-fill" id="prog-2" style="width:100%"></div></div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('script-2')">
            <span class="acc-icon">üìã</span><span class="acc-title">Script ‚Äî Read Aloud to Candidate</span>
            <span class="acc-badge badge-blue">Read aloud</span><span class="acc-chevron open" id="chev-script-2">‚ñº</span>
          </div>
          <div class="acc-body open" id="acc-script-2">
            <div class="script-box">
              "We use Asana as our main work management system. I'm going to give you 5 short scenarios. For each one, briefly describe how you'd set it up or handle it in Asana ‚Äî what the task or project structure would look like, who'd be involved, and how you'd make sure nothing falls through the cracks.<br><br>
              Take about <em>1‚Äì2 minutes per scenario</em>. You have <em>8 minutes total</em>."
            </div>
            <div class="script-instr">üí° Start the timer. Let them work through each scenario. Nudge to the next if they dwell too long on one.</div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('obs-2')">
            <span class="acc-icon">üëÅ</span><span class="acc-title">What to Observe</span>
            <span class="acc-badge badge-yellow">Behavioral signals</span><span class="acc-chevron" id="chev-obs-2">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-obs-2">
            <ul class="observe-list">
              <li><span class="obs-icon">üîÅ</span> Scenario 1 (Month-End Close): Do they set up recurring tasks, assignees, and dependencies? Do they mention templates?</li>
              <li><span class="obs-icon">üìÖ</span> Scenario 2 (Recurring Ops): Do they use recurring tasks or rules? Do they think about visibility and accountability?</li>
              <li><span class="obs-icon">üéØ</span> Scenario 3 (Quarter Goal): Do they mention milestones, subtasks, progress tracking, and CFO visibility?</li>
              <li><span class="obs-icon">üö®</span> Scenario 4 (Cross-team bug): Do they escalate urgently? Include context and expected resolution time in the task?</li>
              <li><span class="obs-icon">üì£</span> Scenario 5 (CFO blocking): Do they use Asana to document the block? Do they escalate outside Asana?</li>
            </ul>
            <div class="flag-box"><strong>üö© Red Flags:</strong> Treats Asana as a to-do list only, no mention of assignees or due dates, no escalation instinct, hasn't used project management tools seriously.</div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('ak-2')">
            <span class="acc-icon">üîë</span><span class="acc-title">Scenario Guide ‚Äî What Strong Looks Like</span>
            <span class="acc-badge badge-red">Hidden</span><span class="acc-chevron" id="chev-ak-2">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-ak-2">
            <div class="ak-locked" id="ak-locked-2"><p>Reveal after section ends or when scoring.</p><button class="btn btn-reveal" onclick="revealAnswerKey(2)">üîì Reveal Guide</button></div>
            <div class="ak-content" id="ak-content-2">
              <div class="ak-item">
                <div class="ak-item-header"><div class="ak-num">1</div><div class="ak-error-name">Month-End Close Process</div></div>
                <div class="ak-item-body">
                  <div class="ak-why">Strong: Uses a template project that recurs each month, assigns tasks to specific people with due dates relative to close date, sets up dependencies (e.g. reconciliation ‚Üí review ‚Üí CFO sign-off), tracks completion in a board or timeline view.</div>
                  <div class="ak-note">Listen for: template, recurring, dependencies, assignees, due dates relative to close</div>
                </div>
              </div>
              <div class="ak-item">
                <div class="ak-item-header"><div class="ak-num">2</div><div class="ak-error-name">Recurring Operational Tasks</div></div>
                <div class="ak-item-body">
                  <div class="ak-why">Strong: Creates recurring tasks (daily/weekly) with clear assignees, uses rules or automations to flag overdue items, checks completion in a team dashboard or weekly standup.</div>
                  <div class="ak-note">Listen for: recurring tasks, visibility, accountability, rules/automations</div>
                </div>
              </div>
              <div class="ak-item">
                <div class="ak-item-header"><div class="ak-num">3</div><div class="ak-error-name">Quarter-Long Improvement Goal</div></div>
                <div class="ak-item-body">
                  <div class="ak-why">Strong: Creates a project with milestones, breaks goal into workstreams/subtasks, sets a timeline view, adds CFO as collaborator or uses status updates to keep them informed.</div>
                  <div class="ak-note">Listen for: milestones, workstreams, stakeholder visibility, status updates</div>
                </div>
              </div>
              <div class="ak-item">
                <div class="ak-item-header"><div class="ak-num">4</div><div class="ak-error-name">Cross-Team Bug</div></div>
                <div class="ak-item-body">
                  <div class="ak-why">Strong: Creates a task with HIGH priority, detailed description of the issue and impact, assigns to engineering lead, sets a tight due date, follows up directly (Slack/email), escalates to manager if no response within hours.</div>
                  <div class="ak-note">Listen for: priority flag, context in description, escalation path, urgency beyond just creating a task</div>
                </div>
              </div>
              <div class="ak-item">
                <div class="ak-item-header"><div class="ak-num">5</div><div class="ak-error-name">CFO Sign-Off Blocking Close</div></div>
                <div class="ak-item-body">
                  <div class="ak-why">Strong: Documents the blocker in Asana (task with CFO assigned, due = today), also escalates outside Asana ‚Äî direct Slack, call, or text. May loop in CEO or COO if truly stuck. Creates a paper trail.</div>
                  <div class="ak-note">Listen for: documentation instinct, willingness to escalate beyond the tool, awareness that Asana alone won't solve it</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SECTION 3: SOP WRITING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="section-view" id="sec-3">
        <div class="timer-card">
          <div class="timer-big" id="timer-3">12:00</div>
          <div class="timer-meta">
            <div class="timer-sec-name">Section 3 ‚Äî Process Documentation</div>
            <div class="timer-sec-sub">Standard Operating Procedure ¬∑ Weight: 20%</div>
            <div class="timer-controls">
              <button class="btn btn-start" id="start-3" onclick="startTimer(3)">‚ñ∂ Start</button>
              <button class="btn btn-pause" id="pause-3" onclick="pauseTimer(3)">‚è∏ Pause</button>
              <button class="btn btn-reset" onclick="resetTimer(3)">‚Ü∫ Reset</button>
              <button class="btn btn-next" onclick="goSection(4)">Next Section ‚Üí</button>
            </div>
            <div class="timer-progress"><div class="timer-progress-fill" id="prog-3" style="width:100%"></div></div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('script-3')">
            <span class="acc-icon">üìã</span><span class="acc-title">Script ‚Äî Read Aloud to Candidate</span>
            <span class="acc-badge badge-blue">Read aloud</span><span class="acc-chevron open" id="chev-script-3">‚ñº</span>
          </div>
          <div class="acc-body open" id="acc-script-3">
            <div class="script-box">
              "Recess just hired a part-time bookkeeper who starts next week. You need to write a document so they can perform the <em>monthly bank reconciliation in QuickBooks Online</em> without your supervision. Recess has 2 checking accounts and 1 corporate credit card.<br><br>
              Write whatever you'd hand to that bookkeeper on day one ‚Äî clear enough that they could follow it independently. You have <em>12 minutes</em>."
            </div>
            <div class="script-instr">üí° Start the timer. Don't tell them what to include ‚Äî the point is to see how they structure it on their own. Stay quiet unless directly asked a clarifying question.</div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('obs-3')">
            <span class="acc-icon">üëÅ</span><span class="acc-title">What to Observe</span>
            <span class="acc-badge badge-yellow">Behavioral signals</span><span class="acc-chevron" id="chev-obs-3">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-obs-3">
            <ul class="observe-list">
              <li><span class="obs-icon">üèó</span> Do they structure the document clearly ‚Äî with a title, purpose, steps, and error handling ‚Äî without being prompted?</li>
              <li><span class="obs-icon">üî¢</span> Do they write numbered, action-verb steps? (e.g. "Navigate to‚Ä¶", "Enter the balance‚Ä¶", "Match each transaction‚Ä¶")</li>
              <li><span class="obs-icon">‚úÖ</span> Do they include a verification checkpoint ‚Äî confirming the difference is $0 before finishing?</li>
              <li><span class="obs-icon">‚ö†Ô∏è</span> Do they address what to do when something goes wrong ‚Äî e.g. the rec doesn't balance?</li>
              <li><span class="obs-icon">üìã</span> Do they cover all 3 accounts (2 checking + 1 credit card)?</li>
              <li><span class="obs-icon">üë§</span> Do they mention sign-off or review ‚Äî who checks their work?</li>
            </ul>
            <div class="flag-box"><strong>üö© Red Flags:</strong> Vague bullet points with no specificity, no QBO-specific steps, no error handling, no verification checkpoint, only covers one account type.</div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('ak-3')">
            <span class="acc-icon">üîë</span><span class="acc-title">Evaluation Guide ‚Äî What a Strong SOP Includes</span>
            <span class="acc-badge badge-red">Hidden</span><span class="acc-chevron" id="chev-ak-3">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-ak-3">
            <div class="ak-locked" id="ak-locked-3"><p>Reveal after section ends or when scoring.</p><button class="btn btn-reveal" onclick="revealAnswerKey(3)">üîì Reveal Guide</button></div>
            <div class="ak-content" id="ak-content-3">
              <div style="font-size:12px;color:var(--muted);margin-bottom:12px">A strong candidate will naturally include most of these elements without being told:</div>
              <div class="sop-eval-grid">
                <div class="sop-eval-item">
                  <div class="sop-eval-title" style="color:var(--green)">‚úÖ Strong Response Includes</div>
                  Clear title + frequency (monthly, by Xth business day)<br>
                  Purpose: why this matters<br>
                  Prerequisites: bank statements ready, QBO access, prior month closed<br>
                  Numbered steps with action verbs and QBO-specific navigation<br>
                  Covers all 3 accounts separately<br>
                  Verification: confirms $0 difference before clicking Finish<br>
                  Exception handling: what to do if it doesn't balance<br>
                  Sign-off: who reviews before marking complete
                </div>
                <div class="sop-eval-item">
                  <div class="sop-eval-title" style="color:var(--red)">üö© Weak Response Signs</div>
                  Generic paragraph with no structure<br>
                  No QBO-specific steps or navigation<br>
                  Missing verification checkpoint ($0 confirmation)<br>
                  No exception handling<br>
                  Only mentions one account, not all three<br>
                  No sign-off or review step<br>
                  Too brief to be usable by someone on day one
                </div>
              </div>
              <div class="ak-note" style="margin-top:10px">üí° Scoring note: A 4 doesn't require perfect structure ‚Äî it requires the <em>instinct</em> to think about the reader and cover edge cases. A 3 includes the core steps but misses exception handling or sign-off. A 2 has the right idea but lacks specificity. A 1 is too vague to be useful.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SECTION 4: CLOSE PACKAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="section-view" id="sec-4">
        <div class="timer-card">
          <div class="timer-big" id="timer-4">15:00</div>
          <div class="timer-meta">
            <div class="timer-sec-name">Section 4 ‚Äî Month-End Close Error Detection</div>
            <div class="timer-sec-sub">Technical Accounting ¬∑ Weight: 30% ¬∑ Most Critical Section</div>
            <div class="timer-controls">
              <button class="btn btn-start" id="start-4" onclick="startTimer(4)">‚ñ∂ Start</button>
              <button class="btn btn-pause" id="pause-4" onclick="pauseTimer(4)">‚è∏ Pause</button>
              <button class="btn btn-reset" onclick="resetTimer(4)">‚Ü∫ Reset</button>
              <button class="btn btn-next" onclick="goSection(5)">Next Section ‚Üí</button>
            </div>
            <div class="timer-progress"><div class="timer-progress-fill" id="prog-4" style="width:100%"></div></div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('script-4')">
            <span class="acc-icon">üìã</span><span class="acc-title">Script ‚Äî Read Aloud to Candidate</span>
            <span class="acc-badge badge-blue">Read aloud</span><span class="acc-chevron open" id="chev-script-4">‚ñº</span>
          </div>
          <div class="acc-body open" id="acc-script-4">
            <div class="script-box">
              "Now for the most important section. Here's a simplified month-end close package for <em>Greenfield Services LLC</em> for January 2026. It includes a trial balance and some supporting documents.<br><br>
              <em>There are several errors embedded in these materials.</em> Please work through the checklist in the worksheet, review the trial balance and supporting docs, record your finding for each step, and write the correcting journal entry for every issue you find.<br><br>
              Note: at least one checklist item will come back clean ‚Äî confirm it correctly rather than inventing a problem. You have <em>15 minutes</em>."
            </div>
            <div class="script-instr">üí° If asked: "Is Greenfield accrual-basis?" ‚Üí Answer: <strong>Yes, accrual basis.</strong> Stay quiet otherwise. Give a 2-minute warning near the end.</div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('tb-4')">
            <span class="acc-icon">üìä</span><span class="acc-title">Trial Balance ‚Äî Greenfield Services LLC ‚Äî Jan 31, 2026</span>
            <span class="acc-badge badge-yellow">Reference Data</span><span class="acc-chevron open" id="chev-tb-4">‚ñº</span>
          </div>
          <div class="acc-body open" id="acc-tb-4">
            <div class="tb-container">
              <table class="tb-table">
                <thead><tr><th style="width:50%">Account</th><th>Debit</th><th>Credit</th><th>Note</th></tr></thead>
                <tbody>
                  <tr class="section-row"><td colspan="4">Assets</td></tr>
                  <tr class="ok-row"><td>Cash ‚Äî Operating</td><td>$84,320</td><td>‚Äî</td><td style="font-size:11px;color:var(--green)">‚úì Ties to bank rec</td></tr>
                  <tr><td>Accounts Receivable</td><td>$127,500</td><td>‚Äî</td><td></td></tr>
                  <tr class="error-row"><td>Prepaid Insurance <span class="error-indicator">‚ö† ERROR</span></td><td>$18,000</td><td>‚Äî</td><td style="font-size:11px;color:var(--red)">Should be $16,500</td></tr>
                  <tr class="error-row"><td>Fixed Assets ‚Äî Equipment <span class="error-indicator">‚ö† ERROR</span></td><td>$145,000</td><td>‚Äî</td><td style="font-size:11px;color:var(--red)">Missing depreciation & laptop reclassification</td></tr>
                  <tr><td>Accumulated Depreciation</td><td>‚Äî</td><td>$29,000</td><td></td></tr>
                  <tr class="section-row"><td colspan="4">Liabilities</td></tr>
                  <tr><td>Accounts Payable</td><td>‚Äî</td><td>$43,200</td><td></td></tr>
                  <tr class="error-row"><td>Accrued Liabilities <span class="error-indicator">‚ö† ERROR</span></td><td>‚Äî</td><td>$8,500</td><td style="font-size:11px;color:var(--red)">Missing utility accrual</td></tr>
                  <tr class="error-row"><td>Deferred Revenue <span class="error-indicator">‚ö† ERROR</span></td><td>‚Äî</td><td>$18,000</td><td style="font-size:11px;color:var(--red)">1/6 should be recognized</td></tr>
                  <tr class="section-row"><td colspan="4">Revenue</td></tr>
                  <tr><td>Revenue ‚Äî Consulting</td><td>‚Äî</td><td>$212,000</td><td></td></tr>
                  <tr class="section-row"><td colspan="4">Expenses</td></tr>
                  <tr><td>Cost of Services</td><td>$98,400</td><td>‚Äî</td><td></td></tr>
                  <tr><td>Rent Expense</td><td>$12,000</td><td>‚Äî</td><td></td></tr>
                  <tr class="error-row"><td>Office Supplies <span class="error-indicator">‚ö† ERROR</span></td><td>$9,200</td><td>‚Äî</td><td style="font-size:11px;color:var(--red)">$6,200 laptop should be capex</td></tr>
                  <tr class="error-row"><td>Utilities Expense <span class="error-indicator">‚ö† ERROR</span></td><td>$0</td><td>‚Äî</td><td style="font-size:11px;color:var(--red)">$2,100 bill unrecorded</td></tr>
                  <tr class="error-row"><td>Depreciation Expense <span class="error-indicator">‚ö† ERROR</span></td><td>$0</td><td>‚Äî</td><td style="font-size:11px;color:var(--red)">$1,208 should be recorded</td></tr>
                  <tr class="error-row"><td>Marketing Expense <span class="error-indicator">‚ö† VARIANCE</span></td><td>$31,500</td><td>‚Äî</td><td style="font-size:11px;color:var(--red)">vs. $10,200 Dec (+209%)</td></tr>
                </tbody>
              </table>
            </div>
            <div class="supporting-docs">
              <div class="doc-card doc-is-ok">
                <div class="doc-card-title">üè¶ Bank Reconciliation</div>
                Bank statement: $86,120 ¬∑ Outstanding check: ($2,400) ¬∑ Deposit in transit: +$600<br>
                <strong>Book balance: $84,320 ‚úì Ties correctly</strong><br>
                <span style="font-size:10px;color:var(--green)">Intentional "trap" ‚Äî bank rec is CORRECT</span>
              </div>
              <div class="doc-card doc-has-error">
                <div class="doc-card-title">üìÑ Supporting Notes</div>
                ‚Ä¢ Insurance: $18,000 annual premium paid Jan 1 (Jan‚ÄìDec 2026)<br>
                ‚Ä¢ Equipment: Annual straight-line depreciation = $14,500/yr<br>
                ‚Ä¢ Deferred Revenue: Client prepaid $18K for 6 months (Jan‚ÄìJun)<br>
                ‚Ä¢ Utility bill: $2,100 received Jan 28 ‚Äî not yet recorded<br>
                ‚Ä¢ Laptop $6,200 purchased Jan 15 ‚Äî coded to Office Supplies<br>
                ‚Ä¢ Marketing: $10,200 in December
              </div>
            </div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('obs-4')">
            <span class="acc-icon">üëÅ</span><span class="acc-title">What to Observe</span>
            <span class="acc-badge badge-yellow">Behavioral signals</span><span class="acc-chevron" id="chev-obs-4">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-obs-4">
            <ul class="observe-list">
              <li><span class="obs-icon">üî¢</span> Do they work systematically top-to-bottom, or jump to most material accounts?</li>
              <li><span class="obs-icon">üè¶</span> Do they correctly confirm the bank rec ties ‚Äî and NOT invent a problem? (Tests honesty and precision)</li>
              <li><span class="obs-icon">üìâ</span> Do they flag the marketing variance independently, without being asked?</li>
              <li><span class="obs-icon">‚úçÔ∏è</span> Can they write proper journal entries (DR/CR) on the spot?</li>
              <li><span class="obs-icon">üí∞</span> Do they mention financial statement impact? (e.g. "This understates expenses, overstates income")</li>
              <li><span class="obs-icon">‚öñÔ∏è</span> Do they prioritize by materiality?</li>
            </ul>
            <div style="display:flex;flex-direction:column;gap:8px;margin-top:10px;font-size:11px">
              <div class="flag-box">üèÜ <strong>Strong:</strong> Finds 5‚Äì6 errors with correct JEs, confirms bank rec ties, flags marketing variance proactively.</div>
              <div class="flag-box" style="border-left-color:var(--blue)">‚úÖ <strong>Good:</strong> Finds 3‚Äì4 errors. Acceptable at this level.</div>
              <div class="flag-box" style="border-left-color:var(--red)">üö© <strong>Concern:</strong> Fewer than 2 errors, wrong JEs, misidentifies bank rec as error, misses $0 depreciation.</div>
            </div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('ak-4')">
            <span class="acc-icon">üîë</span><span class="acc-title">Answer Key ‚Äî All 6 Errors</span>
            <span class="acc-badge badge-red">Hidden</span><span class="acc-chevron" id="chev-ak-4">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-ak-4">
            <div class="ak-locked" id="ak-locked-4"><p>Reveal after section ends or when scoring.</p><button class="btn btn-reveal" onclick="revealAnswerKey(4)">üîì Reveal Answer Key</button></div>
            <div class="ak-content" id="ak-content-4">
              <div class="errors-found-counter">
                <span class="errors-label">Errors candidate found:</span>
                <div class="errors-btns" id="error-counter">
                  <button class="error-count-btn" onclick="setErrors(0)">0</button><button class="error-count-btn" onclick="setErrors(1)">1</button><button class="error-count-btn" onclick="setErrors(2)">2</button><button class="error-count-btn" onclick="setErrors(3)">3</button><button class="error-count-btn" onclick="setErrors(4)">4</button><button class="error-count-btn" onclick="setErrors(5)">5</button><button class="error-count-btn" onclick="setErrors(6)">6</button>
                </div>
              </div>
              <div class="ak-item"><div class="ak-item-header"><div class="ak-num">1</div><div class="ak-error-name">Unrecorded Utility Accrual</div><span class="acc-badge badge-yellow">$2,100</span></div><div class="ak-item-body"><div class="ak-why">$2,100 utility bill received Jan 28 ‚Äî expense incurred but not recorded. Accrual basis requires recognition when incurred.</div><div class="ak-je">DR  Utilities Expense        $2,100<br>CR  Accrued Liabilities       $2,100</div><div class="ak-note">Impact: Understates expenses by $2,100 ‚Üí Overstates net income</div></div></div>
              <div class="ak-item"><div class="ak-item-header"><div class="ak-num">2</div><div class="ak-error-name">Prepaid Insurance Not Amortized</div><span class="acc-badge badge-yellow">$1,500</span></div><div class="ak-item-body"><div class="ak-why">$18,000 / 12 = $1,500/month must be expensed. Prepaid balance should be $16,500 after January.</div><div class="ak-je">DR  Insurance Expense         $1,500<br>CR  Prepaid Insurance          $1,500</div><div class="ak-note">Impact: Prepaid overstated, expenses understated</div></div></div>
              <div class="ak-item"><div class="ak-item-header"><div class="ak-num">3</div><div class="ak-error-name">No Depreciation Recorded</div><span class="acc-badge badge-red">$1,208</span></div><div class="ak-item-body"><div class="ak-why">$14,500/yr √∑ 12 = $1,208/month. Depreciation Expense shows $0.</div><div class="ak-je">DR  Depreciation Expense     $1,208<br>CR  Accumulated Depreciation  $1,208</div><div class="ak-note">Classic close item ‚Äî missing depreciation is a fundamental oversight</div></div></div>
              <div class="ak-item"><div class="ak-item-header"><div class="ak-num">4</div><div class="ak-error-name">Deferred Revenue Not Recognized</div><span class="acc-badge badge-yellow">$3,000</span></div><div class="ak-item-body"><div class="ak-why">Client prepaid $18,000 for 6 months. January = 1/6 = $3,000 earned. Deferred Revenue should be $15,000.</div><div class="ak-je">DR  Deferred Revenue          $3,000<br>CR  Revenue ‚Äî Consulting       $3,000</div><div class="ak-note">Impact: Revenue understated by $3,000 (ASC 606)</div></div></div>
              <div class="ak-item"><div class="ak-item-header"><div class="ak-num">5</div><div class="ak-error-name">Misclassified Capital Expenditure</div><span class="acc-badge badge-red">$6,200</span></div><div class="ak-item-body"><div class="ak-why">$6,200 laptop coded to Office Supplies. Should be capitalized as Fixed Asset.</div><div class="ak-je">DR  Fixed Assets ‚Äî Equipment  $6,200<br>CR  Office Supplies            $6,200</div><div class="ak-note">Impact: Expenses overstated by $6,200; Fixed assets understated</div></div></div>
              <div class="ak-item"><div class="ak-item-header"><div class="ak-num">6</div><div class="ak-error-name">Marketing Expense ‚Äî Unusual Variance (209%)</div><span class="acc-badge badge-yellow">Flag for Investigation</span></div><div class="ak-item-body"><div class="ak-why">$10,200 ‚Üí $31,500, +$21,300. May not be an error but must be investigated and explained before close.</div><div class="ak-je">No JE required yet ‚Äî needs investigation.<br>Breakdown: trade show $18,000 + digital ads $8,400 + agency $5,100</div><div class="ak-note">üè¶ BANK REC NOTE: $86,120 ‚àí $2,400 + $600 = $84,320 ‚úì Ties correctly. Strong candidate confirms this without inventing a problem.</div></div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SECTION 5: AI FLUENCY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="section-view" id="sec-5">
        <div class="timer-card">
          <div class="timer-big" id="timer-5">7:00</div>
          <div class="timer-meta">
            <div class="timer-sec-name">Section 5 ‚Äî AI Fluency</div>
            <div class="timer-sec-sub">Prompt Writing + Verification + Written Response ¬∑ Weight: 15%</div>
            <div class="timer-controls">
              <button class="btn btn-start" id="start-5" onclick="startTimer(5)">‚ñ∂ Start</button>
              <button class="btn btn-pause" id="pause-5" onclick="pauseTimer(5)">‚è∏ Pause</button>
              <button class="btn btn-reset" onclick="resetTimer(5)">‚Ü∫ Reset</button>
              <button class="btn btn-next" onclick="goSection('score')" style="background:var(--green);color:#0d1117">View Final Score ‚Üí</button>
            </div>
            <div class="timer-progress"><div class="timer-progress-fill" id="prog-5" style="width:100%"></div></div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('script-5')">
            <span class="acc-icon">üìã</span><span class="acc-title">Script ‚Äî Read Aloud to Candidate</span>
            <span class="acc-badge badge-blue">Read aloud</span><span class="acc-chevron open" id="chev-script-5">‚ñº</span>
          </div>
          <div class="acc-body open" id="acc-script-5">
            <div class="script-box">
              "Last section. Based on the marketing expense variance we just saw ‚Äî it jumped from <em>$10,200 in December to $31,500 in January, a 209% increase</em>.<br><br>
              In the worksheet, <em>Part A</em>: write the AI prompt you'd use to draft a variance analysis narrative for the CFO.<br>
              <em>Part B</em>: before sending the AI output to the CFO, what steps would you take? Write that out.<br>
              <em>Part C</em>: briefly describe one accounting task you use AI for today ‚Äî or wish you could ‚Äî that would save significant time each month. Or, what's the first workflow you'd automate at Recess?<br><br>
              You have <em>7 minutes</em> for all three."
            </div>
            <div class="script-instr">üí° All three parts are now written responses in the worksheet. Let them work through all three. Review their answers after the timer ends.</div>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('sig-5')">
            <span class="acc-icon">üëÅ</span><span class="acc-title">What to Look For ‚Äî Strong vs. Weak Signals</span>
            <span class="acc-badge badge-yellow">Evaluation guide</span><span class="acc-chevron" id="chev-sig-5">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-sig-5">
            <div class="ai-signals">
              <div class="signal-box signal-strong">
                <div class="signal-title">‚úÖ Strong Signals</div>
                <ul class="signal-list">
                  <li>Part A prompt includes context, numbers, audience, format constraints</li>
                  <li>Part A specifies tone/length ("keep under 200 words, professional")</li>
                  <li>Part B mentions verifying numbers match trial balance</li>
                  <li>Part B flags hallucination risk and fact-checks AI output</li>
                  <li>Part B mentions data privacy ‚Äî no real client data in public AI tools</li>
                  <li>Part C names specific tools (Claude, ChatGPT, Copilot)</li>
                  <li>Part C gives real accounting use cases (JE drafts, formula gen, SOP first drafts, variance narratives)</li>
                </ul>
              </div>
              <div class="signal-box signal-weak">
                <div class="signal-title">üö© Weak Signals</div>
                <ul class="signal-list">
                  <li>Part A prompt is generic ‚Äî no numbers, no audience, no constraints</li>
                  <li>Part B would trust AI output without review</li>
                  <li>Part B no mention of data privacy or hallucination risk</li>
                  <li>Part C has never used AI tools professionally</li>
                  <li>Part C dismisses AI as irrelevant to accounting</li>
                  <li>Treats AI as a novelty, not a workflow tool</li>
                </ul>
              </div>
            </div>
            <p style="font-size:11px;color:var(--muted);margin-top:10px">üí° <strong>Strong Part A example:</strong> "You are a financial analyst. Marketing expense for Greenfield Services LLC increased from $10,200 in December to $31,500 in January (+209%). The breakdown is: trade show deposit $18,000, digital ads $8,400, agency retainer $5,100. Write a 150-word variance analysis narrative for the CFO explaining the causes. Use professional but direct language."</p>
          </div>
        </div>

        <div class="acc-card">
          <div class="acc-header" onclick="toggleAcc('debrief-5')">
            <span class="acc-icon">üé§</span><span class="acc-title">Closing Debrief (2 min after timer)</span>
            <span class="acc-badge badge-green">Optional</span><span class="acc-chevron" id="chev-debrief-5">‚ñº</span>
          </div>
          <div class="acc-body" id="acc-debrief-5">
            <div class="script-box">
              "That's everything ‚Äî thank you, that was great. Before we wrap: <em>how did that feel?</em> Is there anything from the close package section you'd want to revisit or add?"
            </div>
            <div class="script-instr">üí° This is your final read on self-awareness, composure, and whether they caught something they missed. Strong candidates will often surface an error they didn't have time to explain fully.</div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FINAL SCORE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="section-view" id="sec-score">
        <div class="acc-card">
          <div class="acc-header" style="cursor:default"><span class="acc-icon">üìä</span><span class="acc-title">Final Score Summary</span></div>
          <div class="acc-body open" style="display:block">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
              <div>
                <p style="font-size:13px;margin-bottom:14px;color:var(--muted)">Scored sections and weighted total:</p>
                <table style="width:100%;font-size:13px;border-collapse:collapse">
                  <thead><tr style="font-size:11px;text-transform:uppercase;color:var(--muted)"><th style="text-align:left;padding:6px 0">Section</th><th style="text-align:center;padding:6px 8px">Weight</th><th style="text-align:center;padding:6px 8px">Score</th><th style="text-align:right;padding:6px 0">Weighted</th></tr></thead>
                  <tbody>
                    <tr style="border-top:1px solid var(--border)"><td style="padding:8px 0">Inbox Triage</td><td style="text-align:center;padding:8px">20%</td><td style="text-align:center;padding:8px;font-weight:700" id="fs-s1">‚Äî</td><td style="text-align:right;padding:8px 0" id="fs-w1">‚Äî</td></tr>
                    <tr style="border-top:1px solid var(--border)"><td style="padding:8px 0">Asana Workflow</td><td style="text-align:center;padding:8px">15%</td><td style="text-align:center;padding:8px;font-weight:700" id="fs-s2">‚Äî</td><td style="text-align:right;padding:8px 0" id="fs-w2">‚Äî</td></tr>
                    <tr style="border-top:1px solid var(--border)"><td style="padding:8px 0">SOP Writing</td><td style="text-align:center;padding:8px">20%</td><td style="text-align:center;padding:8px;font-weight:700" id="fs-s3">‚Äî</td><td style="text-align:right;padding:8px 0" id="fs-w3">‚Äî</td></tr>
                    <tr style="border-top:1px solid var(--border)"><td style="padding:8px 0">Close Package</td><td style="text-align:center;padding:8px">30%</td><td style="text-align:center;padding:8px;font-weight:700" id="fs-s4">‚Äî</td><td style="text-align:right;padding:8px 0" id="fs-w4">‚Äî</td></tr>
                    <tr style="border-top:1px solid var(--border)"><td style="padding:8px 0">AI Fluency</td><td style="text-align:center;padding:8px">15%</td><td style="text-align:center;padding:8px;font-weight:700" id="fs-s5">‚Äî</td><td style="text-align:right;padding:8px 0" id="fs-w5">‚Äî</td></tr>
                    <tr style="border-top:2px solid var(--border);font-weight:700"><td style="padding:10px 0">Weighted Total</td><td style="text-align:center;padding:10px">100%</td><td></td><td style="text-align:right;padding:10px 0" id="fs-total">‚Äî</td></tr>
                  </tbody>
                </table>
              </div>
              <div style="text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px">
                <div style="font-size:11px;text-transform:uppercase;letter-spacing:0.08em;color:var(--muted)">Decision</div>
                <div style="font-size:64px;font-weight:800;font-family:monospace" id="fs-big-score">‚Äî</div>
                <div id="fs-decision-badge" class="decision-badge d-pending">Score sections ‚Üí</div>
                <div id="fs-decision-sub" style="font-size:11px;color:var(--muted)">Fill in scores on the right panel</div>
                <div class="critical-flag" id="fs-critical-flag">‚ö†Ô∏è Scored 1 on Close Package ‚Äî Do not advance regardless of total score</div>
              </div>
            </div>
            <div style="margin-top:16px;padding-top:16px;border-top:1px solid var(--border)">
              <p style="font-size:11px;font-weight:600;color:var(--muted);text-transform:uppercase;letter-spacing:0.06em;margin-bottom:8px">Interview Notes</p>
              <textarea id="final-notes" style="width:100%;background:var(--bg);border:1px solid var(--border);color:var(--text);padding:10px;border-radius:8px;font-size:12px;resize:none;height:100px;font-family:inherit;line-height:1.5;outline:none" placeholder="Overall impressions, standout moments, areas of concern‚Ä¶"></textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ALL CANDIDATES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="section-view" id="sec-candidates">
        <div class="candidates-toolbar">
          <h2>üë• Candidate History & Comparison</h2>
          <button class="btn-clear-all" onclick="clearAllCandidates()">üóë Clear All</button>
        </div>
        <div class="candidates-stats" id="cand-stats" style="display:none">
          <div class="cstat"><div class="cstat-num" id="cstat-count">0</div><div class="cstat-label">Candidates</div></div>
          <div class="cstat"><div class="cstat-num" id="cstat-avg">‚Äî</div><div class="cstat-label">Avg Score</div></div>
          <div class="cstat"><div class="cstat-num" id="cstat-best">‚Äî</div><div class="cstat-label">Top Score</div></div>
          <div class="cstat"><div class="cstat-num" id="cstat-hire" style="color:var(--green)">0</div><div class="cstat-label">Hire / Strong Hire</div></div>
        </div>
        <div class="acc-card"><div id="candidates-list">
          <div class="candidates-empty"><span class="empty-icon">üìã</span>No candidates recorded yet.<br>Scores are saved automatically when you click<br><strong>"Reset for Next Candidate"</strong>.</div>
        </div></div>
      </div>

    </div><!-- /section-area -->

    <!-- SCORE PANEL -->
    <div class="score-panel">
      <div class="score-card">
        <div class="score-card-title">Live Scorecard</div>
        <div class="score-row">
          <div class="score-row-header"><span class="score-row-name">1. Inbox Triage</span><span class="score-row-weight">20%</span></div>
          <div class="score-btns"><button class="sc-btn" onclick="setScore(1,1)">1</button><button class="sc-btn" onclick="setScore(1,2)">2</button><button class="sc-btn" onclick="setScore(1,3)">3</button><button class="sc-btn" onclick="setScore(1,4)">4</button></div>
          <div class="score-row-rubric" id="rubric-1"></div>
        </div>
        <div class="score-row">
          <div class="score-row-header"><span class="score-row-name">2. Asana Workflow</span><span class="score-row-weight">15%</span></div>
          <div class="score-btns"><button class="sc-btn" onclick="setScore(2,1)">1</button><button class="sc-btn" onclick="setScore(2,2)">2</button><button class="sc-btn" onclick="setScore(2,3)">3</button><button class="sc-btn" onclick="setScore(2,4)">4</button></div>
          <div class="score-row-rubric" id="rubric-2"></div>
        </div>
        <div class="score-row">
          <div class="score-row-header"><span class="score-row-name">3. SOP Writing</span><span class="score-row-weight">20%</span></div>
          <div class="score-btns"><button class="sc-btn" onclick="setScore(3,1)">1</button><button class="sc-btn" onclick="setScore(3,2)">2</button><button class="sc-btn" onclick="setScore(3,3)">3</button><button class="sc-btn" onclick="setScore(3,4)">4</button></div>
          <div class="score-row-rubric" id="rubric-3"></div>
        </div>
        <div class="score-row">
          <div class="score-row-header"><span class="score-row-name">4. Close Package</span><span class="score-row-weight">30% ‚≠ê</span></div>
          <div class="score-btns"><button class="sc-btn" onclick="setScore(4,1)">1</button><button class="sc-btn" onclick="setScore(4,2)">2</button><button class="sc-btn" onclick="setScore(4,3)">3</button><button class="sc-btn" onclick="setScore(4,4)">4</button></div>
          <div class="score-row-rubric" id="rubric-4"></div>
        </div>
        <div class="score-row">
          <div class="score-row-header"><span class="score-row-name">5. AI Fluency</span><span class="score-row-weight">15%</span></div>
          <div class="score-btns"><button class="sc-btn" onclick="setScore(5,1)">1</button><button class="sc-btn" onclick="setScore(5,2)">2</button><button class="sc-btn" onclick="setScore(5,3)">3</button><button class="sc-btn" onclick="setScore(5,4)">4</button></div>
          <div class="score-row-rubric" id="rubric-5"></div>
        </div>
        <hr style="border:none;border-top:1px solid var(--border);margin:8px 0">
        <div class="rubric-ref">
          <div><span class="rr-score rr-4">4</span> Exceptional ‚Äî mastery</div>
          <div><span class="rr-score rr-3">3</span> Proficient ‚Äî solid</div>
          <div><span class="rr-score rr-2">2</span> Developing ‚Äî gaps</div>
          <div><span class="rr-score rr-1">1</span> Insufficient ‚Äî below bar</div>
        </div>
      </div>

      <div class="total-score-card">
        <div class="total-score-label">Weighted Score</div>
        <div class="total-score-num" id="total-score-display">‚Äî</div>
        <div class="total-score-max">out of 4.0</div>
        <div class="decision-badge d-pending" id="decision-badge">Score all sections</div>
        <div class="decision-sub" id="decision-sub">3.5‚Äì4.0 = Strong Hire<br>2.8‚Äì3.4 = Hire<br>2.0‚Äì2.7 = Borderline<br>&lt;2.0 = No Hire</div>
        <div class="critical-flag" id="critical-flag-mini">‚ö†Ô∏è Score 1 on Close = Instant No-Hire</div>
        <div style="margin-top:12px;border-top:1px solid var(--border);padding-top:12px;display:flex;flex-direction:column;gap:6px;">
          <button onclick="saveCandidate()" id="save-btn" style="width:100%;padding:10px;border-radius:8px;border:none;background:var(--brand);color:white;font-size:13px;font-weight:700;cursor:pointer;transition:all 0.15s;">üíæ Save Candidate</button>
          <div id="save-status" style="font-size:11px;text-align:center;color:var(--muted);min-height:16px;"></div>
          <button onclick="openNewCandidateModal()" style="width:100%;padding:8px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--muted);font-size:12px;font-weight:600;cursor:pointer;transition:all 0.15s;" onmouseover="this.style.color='var(--text)'" onmouseout="this.style.color='var(--muted)'">Ôºã Next Candidate</button>
        </div>
      </div>

      <div class="notes-card">
        <h4>Interview Notes</h4>
        <textarea placeholder="Observations, standout moments, concerns‚Ä¶&#10;&#10;e.g. 'Scanned all items first ‚úì', 'Missed depreciation initially', 'SOP lacked error handling‚Ä¶'"></textarea>
      </div>
    </div>

  </div><!-- /main-content -->
</div><!-- /app-body -->

<script>
// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
const TIMERS = {
  1:{total:600,remaining:600,running:false,interval:null},
  2:{total:480,remaining:480,running:false,interval:null},
  3:{total:720,remaining:720,running:false,interval:null},
  4:{total:900,remaining:900,running:false,interval:null},
  5:{total:420,remaining:420,running:false,interval:null}
};
const scores = {1:null,2:null,3:null,4:null,5:null};
const weights = {1:0.20,2:0.15,3:0.20,4:0.30,5:0.15};
const rubrics = {
  1:{1:'No prioritization; handles items in order; misses bank feed and rec issues',
     2:'Misses critical close-blockers (#3/#12); limited delegation',
     3:'Prioritizes most logically; identifies key deadline; minor gaps',
     4:'Scans all items first; clear framework; delegates 3+ items; catches all blockers'},
  2:{1:'Treats Asana as a to-do list; no assignees, due dates, or escalation instinct',
     2:'Basic task creation; limited use of recurrence or project structure',
     3:'Uses recurring tasks, assignees, due dates; some escalation awareness',
     4:'Templates, dependencies, automations; clear escalation path; CFO visibility'},
  3:{1:'Too vague to be usable; no structure, no QBO steps, no verification',
     2:'Has the right idea but lacks specificity or misses key sections',
     3:'Covers core steps with QBO nav; includes verification; minor gaps in edge cases',
     4:'Clear structure; action-verb steps; all 3 accounts; error handling; sign-off'},
  4:{1:'Fewer than 2 errors found; wrong journal entries; misidentifies bank rec',
     2:'2‚Äì3 errors found; some JEs incomplete; limited insight on impact',
     3:'3‚Äì4 errors with mostly correct JEs; correctly handles bank rec',
     4:'5‚Äì6 errors; correct JEs; confirms bank rec ties; discusses P&L impact; flags variance'},
  5:{1:'No AI tool experience; generic prompt; no verification steps; dismissive of AI',
     2:'Basic prompt; limited verification; some AI awareness but no data privacy instinct',
     3:'Reasonable prompt with context; mentions checking output; aware of key risks',
     4:'Specific prompt with numbers, audience, constraints; flags data privacy; clear use cases'}
};

// Total elapsed timer
let totalSeconds = 0;
setInterval(() => {
  totalSeconds++;
  const m = String(Math.floor(totalSeconds/60)).padStart(2,'0');
  const s = String(totalSeconds%60).padStart(2,'0');
  document.getElementById('totalClock').textContent = m+':'+s;
}, 1000);

// ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ
function goSection(n) {
  document.querySelectorAll('.section-view').forEach(v => v.classList.remove('active'));
  document.querySelectorAll('.sec-nav-btn').forEach(b => b.classList.remove('active'));
  if (n === 'score') {
    document.getElementById('sec-score').classList.add('active');
    document.getElementById('nav-score').classList.add('active');
    updateFinalScore();
  } else if (n === 'candidates') {
    document.getElementById('sec-candidates').classList.add('active');
    document.getElementById('nav-candidates').classList.add('active');
    renderCandidateHistory();
  } else {
    document.getElementById('sec-'+n).classList.add('active');
    document.getElementById('nav-'+n).classList.add('active');
  }
}

// ‚îÄ‚îÄ TIMERS ‚îÄ‚îÄ
function formatTime(s) { return Math.floor(s/60)+':'+(s%60<10?'0':'')+(s%60); }

function startTimer(n) {
  const t = TIMERS[n];
  if (t.running) return;
  t.running = true;
  document.getElementById('start-'+n).style.display = 'none';
  document.getElementById('pause-'+n).style.display = 'inline-block';
  t.interval = setInterval(() => {
    t.remaining--;
    const el = document.getElementById('timer-'+n);
    el.textContent = formatTime(t.remaining);
    document.getElementById('prog-'+n).style.width = (t.remaining/t.total*100)+'%';
    el.className = 'timer-big';
    if (t.remaining <= 60 && t.remaining > 20) el.classList.add('warn');
    if (t.remaining <= 20) el.classList.add('urgent');
    if (t.remaining === 60) showToast('‚è∞ 1 Minute Remaining ‚Äî Section '+n);
    if (t.remaining <= 0) {
      clearInterval(t.interval); t.running = false;
      el.textContent = 'TIME'; el.classList.add('urgent');
      document.getElementById('pause-'+n).style.display = 'none';
      document.getElementById('start-'+n).style.display = 'inline-block';
      document.getElementById('start-'+n).disabled = true;
      document.getElementById('nav-'+n).classList.add('done');
      document.getElementById('circle-'+n).textContent = '‚úì';
      showToast('‚è± Section '+n+' ‚Äî Time Up!');
    }
  }, 1000);
}

function pauseTimer(n) {
  clearInterval(TIMERS[n].interval); TIMERS[n].running = false;
  document.getElementById('start-'+n).style.display = 'inline-block';
  document.getElementById('pause-'+n).style.display = 'none';
}

function resetTimer(n) {
  const t = TIMERS[n];
  clearInterval(t.interval); t.running = false; t.remaining = t.total;
  document.getElementById('timer-'+n).textContent = formatTime(t.total);
  document.getElementById('timer-'+n).className = 'timer-big';
  document.getElementById('prog-'+n).style.width = '100%';
  document.getElementById('start-'+n).style.display = 'inline-block';
  document.getElementById('start-'+n).disabled = false;
  document.getElementById('pause-'+n).style.display = 'none';
}

// ‚îÄ‚îÄ ACCORDION ‚îÄ‚îÄ
function toggleAcc(id) {
  const body = document.getElementById('acc-'+id);
  const chev = document.getElementById('chev-'+id);
  if (!body) return;
  body.classList.toggle('open');
  if (chev) chev.classList.toggle('open', body.classList.contains('open'));
}

// ‚îÄ‚îÄ ANSWER KEYS ‚îÄ‚îÄ
function revealAnswerKey(n) {
  document.getElementById('ak-locked-'+n).style.display = 'none';
  document.getElementById('ak-content-'+n).classList.add('revealed');
}

// ‚îÄ‚îÄ SCORING ‚îÄ‚îÄ
function setScore(section, score) {
  scores[section] = score;
  const allRows = document.querySelectorAll('.score-row');
  const row = allRows[section-1];
  row.querySelectorAll('.sc-btn').forEach(b => { b.className = b.className.replace(/sel-\d/g,'').trim(); });
  row.querySelectorAll('.sc-btn')[score-1].classList.add('sel-'+score);
  document.getElementById('rubric-'+section).textContent = rubrics[section][score];
  calcTotal();
}

function calcTotal() {
  let weightedSum = 0, allScored = true;
  [1,2,3,4,5].forEach(s => {
    if (scores[s] !== null) weightedSum += scores[s] * weights[s];
    else allScored = false;
  });
  const display = document.getElementById('total-score-display');
  const badge = document.getElementById('decision-badge');
  const sub = document.getElementById('decision-sub');
  const crit = document.getElementById('critical-flag-mini');
  if (!allScored) {
    display.textContent = weightedSum > 0 ? weightedSum.toFixed(2) : '‚Äî';
    badge.textContent = 'Score all sections';
    badge.className = 'decision-badge d-pending';
    return;
  }
  display.textContent = weightedSum.toFixed(2);
  crit.style.display = scores[4] === 1 ? 'block' : 'none';
  if (scores[4] === 1) { badge.textContent = 'üö´ No Hire'; badge.className = 'decision-badge d-nohire'; sub.textContent = 'Critical fail: scored 1 on Close Package'; }
  else if (weightedSum >= 3.5) { badge.textContent = '‚≠ê Strong Hire'; badge.className = 'decision-badge d-strong'; sub.textContent = 'Exceptional ‚Äî ready to own the function'; }
  else if (weightedSum >= 2.8) { badge.textContent = '‚úÖ Hire'; badge.className = 'decision-badge d-hire'; sub.textContent = 'Solid performer with minor development areas'; }
  else if (weightedSum >= 2.0) { badge.textContent = '‚ö†Ô∏è Borderline'; badge.className = 'decision-badge d-border'; sub.textContent = 'Gaps ‚Äî discuss with hiring team'; }
  else { badge.textContent = 'üö´ No Hire'; badge.className = 'decision-badge d-nohire'; sub.textContent = 'Significant gaps for a senior role'; }
  updateFinalScore();
}

function updateFinalScore() {
  let total = 0, allScored = true;
  [1,2,3,4,5].forEach(s => {
    if (scores[s] !== null) { document.getElementById('fs-s'+s).textContent = scores[s]; document.getElementById('fs-w'+s).textContent = (scores[s]*weights[s]).toFixed(2); total += scores[s]*weights[s]; }
    else { document.getElementById('fs-s'+s).textContent = '‚Äî'; document.getElementById('fs-w'+s).textContent = '‚Äî'; allScored = false; }
  });
  const bigScore = document.getElementById('fs-big-score');
  const badge = document.getElementById('fs-decision-badge');
  const sub = document.getElementById('fs-decision-sub');
  const crit = document.getElementById('fs-critical-flag');
  if (!allScored) { document.getElementById('fs-total').textContent = '‚Äî'; bigScore.textContent = '‚Äî'; badge.className='decision-badge d-pending'; badge.textContent='Score sections ‚Üí'; return; }
  document.getElementById('fs-total').textContent = total.toFixed(2);
  bigScore.textContent = total.toFixed(2);
  crit.style.display = scores[4] === 1 ? 'block' : 'none';
  if (scores[4]===1) { badge.textContent='üö´ No Hire'; badge.className='decision-badge d-nohire'; sub.textContent='Critical fail: Close Package scored 1'; }
  else if (total>=3.5) { badge.textContent='‚≠ê Strong Hire'; badge.className='decision-badge d-strong'; sub.textContent='Exceptional across all competencies tested'; }
  else if (total>=2.8) { badge.textContent='‚úÖ Hire'; badge.className='decision-badge d-hire'; sub.textContent='Solid performer ‚Äî recommend advancing'; }
  else if (total>=2.0) { badge.textContent='‚ö†Ô∏è Borderline'; badge.className='decision-badge d-border'; sub.textContent='Discuss with hiring team before advancing'; }
  else { badge.textContent='üö´ No Hire'; badge.className='decision-badge d-nohire'; sub.textContent='Significant gaps for this level'; }
}

function setErrors(n) { document.querySelectorAll('.error-count-btn').forEach((b,i)=>b.classList.toggle('active',i===n)); }

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.style.display = 'block';
  setTimeout(()=>{ t.style.display='none'; }, 4000);
}

// ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ
function openNewCandidateModal() {
  const name = document.getElementById('candidateName').value.trim() || 'Unnamed Candidate';
  document.getElementById('sum-name').textContent = name;
  document.getElementById('sum-time').textContent =
    new Date().toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'}) + ' ‚Äî ' +
    new Date().toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'});
  const cols = {1:'sr-1',2:'sr-2',3:'sr-3',4:'sr-4'};
  [1,2,3,4,5].forEach(s => {
    const el = document.getElementById('sum-s'+s);
    el.textContent = scores[s]!==null ? scores[s] : '‚Äî';
    el.className = 'summary-row-score ' + (scores[s] ? cols[scores[s]] : 'sr-none');
  });
  const allScored = [1,2,3,4,5].every(s=>scores[s]!==null);
  const totalEl = document.getElementById('sum-total');
  const subEl = document.getElementById('sum-decision-sub');
  if (allScored) {
    const weighted = [1,2,3,4,5].reduce((a,s)=>a+scores[s]*weights[s],0);
    totalEl.textContent = weighted.toFixed(2);
    totalEl.style.color = weighted>=3.5?'var(--green)':weighted>=2.8?'var(--blue)':weighted>=2.0?'var(--yellow)':'var(--red)';
    subEl.textContent = weighted>=3.5?'‚≠ê Strong Hire':weighted>=2.8?'‚úÖ Hire':weighted>=2.0?'‚ö†Ô∏è Borderline':'üö´ No Hire';
    if (scores[4]===1) subEl.textContent = 'üö´ No Hire ‚Äî Critical fail on Close';
  } else { totalEl.textContent='‚Äî'; totalEl.style.color='var(--muted)'; subEl.textContent='Not all sections scored'; }
  const notes = document.querySelector('.notes-card textarea').value.trim();
  const notesEl = document.getElementById('sum-notes');
  notesEl.textContent = notes || 'No notes recorded.';
  document.getElementById('newCandidateModal').classList.add('open');
}

function closeNewCandidateModal() { document.getElementById('newCandidateModal').classList.remove('open'); }

function confirmReset() {
  saveCurrentCandidate();
  closeNewCandidateModal();
  document.getElementById('candidateName').value = '';
  [1,2,3,4,5].forEach(n => resetTimer(n));
  [1,2,3,4,5].forEach(s => { scores[s]=null; });
  document.querySelectorAll('.sc-btn').forEach(b=>{ b.className=b.className.replace(/sel-\d/g,'').trim(); });
  [1,2,3,4,5].forEach(s=>{ document.getElementById('rubric-'+s).textContent=''; });
  document.getElementById('total-score-display').textContent='‚Äî';
  document.getElementById('decision-badge').textContent='Score all sections';
  document.getElementById('decision-badge').className='decision-badge d-pending';
  document.getElementById('decision-sub').innerHTML='3.5‚Äì4.0 = Strong Hire<br>2.8‚Äì3.4 = Hire<br>2.0‚Äì2.7 = Borderline<br>&lt;2.0 = No Hire';
  document.getElementById('critical-flag-mini').style.display='none';
  document.querySelector('.notes-card textarea').value='';
  [1,2,3,4,5].forEach(s=>{ document.getElementById('fs-s'+s).textContent='‚Äî'; document.getElementById('fs-w'+s).textContent='‚Äî'; });
  document.getElementById('fs-total').textContent='‚Äî';
  document.getElementById('fs-big-score').textContent='‚Äî';
  document.getElementById('fs-decision-badge').textContent='Score sections ‚Üí';
  document.getElementById('fs-decision-badge').className='decision-badge d-pending';
  document.getElementById('fs-decision-sub').textContent='Fill in scores on the right panel';
  document.getElementById('fs-critical-flag').style.display='none';
  if (document.getElementById('final-notes')) document.getElementById('final-notes').value='';
  document.querySelectorAll('.error-count-btn').forEach(b=>b.classList.remove('active'));
  [1,2,3,4].forEach(n=>{
    const locked=document.getElementById('ak-locked-'+n);
    const content=document.getElementById('ak-content-'+n);
    if(locked) locked.style.display='block';
    if(content) content.classList.remove('revealed');
  });
  [1,2,3,4,5].forEach(n=>{ document.getElementById('nav-'+n).classList.remove('done'); document.getElementById('circle-'+n).textContent=n; });
  goSection(1);
  showToast('‚úì Ready for next candidate!');
}

document.getElementById('newCandidateModal').addEventListener('click',function(e){ if(e.target===this) closeNewCandidateModal(); });

// ‚îÄ‚îÄ CANDIDATE HISTORY ‚îÄ‚îÄ
let candidateHistory = JSON.parse(localStorage.getItem('recessCandidateHistoryV2')||'[]');

function getDecisionKey(ws, closeScore) {
  if (ws===null) return 'incomplete';
  if (closeScore===1) return 'no-hire';
  if (ws>=3.5) return 'strong-hire';
  if (ws>=2.8) return 'hire';
  if (ws>=2.0) return 'borderline';
  return 'no-hire';
}
function getDecisionLabel(k) { return {'strong-hire':'‚≠ê Strong Hire','hire':'‚úÖ Hire','borderline':'‚ö†Ô∏è Borderline','no-hire':'üö´ No Hire','incomplete':'‚Äî Incomplete'}[k]||'‚Äî'; }

function saveCurrentCandidate() {
  const name = document.getElementById('candidateName').value.trim()||'Unnamed Candidate';
  const allScored = [1,2,3,4,5].every(s=>scores[s]!==null);
  let ws = null;
  if (allScored) ws = parseFloat([1,2,3,4,5].reduce((a,s)=>a+scores[s]*weights[s],0).toFixed(2));
  const notes = document.querySelector('.notes-card textarea').value.trim();
  candidateHistory.unshift({ id:Date.now(), name, timestamp:new Date().toISOString(), scores:{1:scores[1],2:scores[2],3:scores[3],4:scores[4],5:scores[5]}, weightedScore:ws, decision:getDecisionKey(ws,scores[4]), notes });
  localStorage.setItem('recessCandidateHistoryV2', JSON.stringify(candidateHistory));
  updateCandidateBadge();
}

function updateCandidateBadge() {
  const b = document.getElementById('cand-count-badge');
  b.textContent = candidateHistory.length > 0 ? '('+candidateHistory.length+')' : '';
}

function renderCandidateHistory() {
  const container = document.getElementById('candidates-list');
  const statsEl = document.getElementById('cand-stats');
  if (!candidateHistory.length) {
    statsEl.style.display='none';
    container.innerHTML='<div class="candidates-empty"><span class="empty-icon">üìã</span>No candidates recorded yet.<br>Scores are saved automatically when you click<br><strong>"Reset for Next Candidate"</strong>.</div>';
    return;
  }
  const scored = candidateHistory.filter(c=>c.weightedScore!==null);
  const avg = scored.length ? (scored.reduce((a,c)=>a+c.weightedScore,0)/scored.length).toFixed(2) : '‚Äî';
  const best = scored.length ? Math.max(...scored.map(c=>c.weightedScore)).toFixed(2) : '‚Äî';
  const bestId = scored.length ? scored.reduce((a,c)=>c.weightedScore>a.weightedScore?c:a).id : null;
  const hires = candidateHistory.filter(c=>c.decision==='hire'||c.decision==='strong-hire').length;
  statsEl.style.display='flex';
  document.getElementById('cstat-count').textContent=candidateHistory.length;
  document.getElementById('cstat-avg').textContent=avg;
  document.getElementById('cstat-best').textContent=best;
  document.getElementById('cstat-hire').textContent=hires;

  const sp = s => s!==null ? `<span class="score-pill sp-${s}">${s}</span>` : `<span class="score-pill sp-none">‚Äî</span>`;
  const wc = d => ({'strong-hire':'ws-strong','hire':'ws-hire','borderline':'ws-border','no-hire':'ws-nohire','incomplete':'ws-none'}[d]||'ws-none');
  const dc = d => ({'strong-hire':'cb-strong','hire':'cb-hire','borderline':'cb-border','no-hire':'cb-nohire','incomplete':'cb-incomplete'}[d]||'cb-incomplete');

  const rows = candidateHistory.map(c=>{
    const isBest = c.id===bestId;
    const date = new Date(c.timestamp).toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});
    const time = new Date(c.timestamp).toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'});
    const ws = c.weightedScore!==null ? c.weightedScore.toFixed(2) : '‚Äî';
    const hasNotes = c.notes&&c.notes.length>0;
    return `
      <tr class="${isBest?'best-overall':''}" id="row-${c.id}">
        <td><div class="cand-name">${escHtml(c.name)}${isBest?'<span class="top-badge">TOP</span>':''}</div><div class="cand-date">${date} ¬∑ ${time}</div></td>
        <td class="col-score">${sp(c.scores[1])}</td>
        <td class="col-score">${sp(c.scores[2])}</td>
        <td class="col-score">${sp(c.scores[3])}</td>
        <td class="col-score">${sp(c.scores[4])}</td>
        <td class="col-score">${sp(c.scores[5])}</td>
        <td class="col-score"><span class="weighted-score ${wc(c.decision)}">${ws}</span></td>
        <td><span class="cand-decision-badge ${dc(c.decision)}">${getDecisionLabel(c.decision)}</span></td>
        <td>${hasNotes?`<button class="cand-notes-toggle" onclick="toggleNotes(${c.id})">Notes ‚ñæ</button>`:'<span style="font-size:11px;color:var(--muted)">‚Äî</span>'}</td>
        <td><button class="cand-delete" onclick="deleteCandidate(${c.id})" title="Remove">‚úï</button></td>
      </tr>
      ${hasNotes?`<tr class="notes-row" id="notes-${c.id}"><td colspan="10"><div class="notes-row-inner" id="notes-inner-${c.id}">${escHtml(c.notes).replace(/\n/g,'<br>')}</div></td></tr>`:''}`;
  }).join('');

  container.innerHTML = `<div class="candidates-table-wrap"><table class="candidates-table">
    <thead><tr>
      <th>Candidate</th>
      <th class="col-score">Inbox<br><span style="font-weight:400;color:var(--muted)">20%</span></th>
      <th class="col-score">Asana<br><span style="font-weight:400;color:var(--muted)">15%</span></th>
      <th class="col-score">SOP<br><span style="font-weight:400;color:var(--muted)">20%</span></th>
      <th class="col-score">Close<br><span style="font-weight:400;color:var(--muted)">30%</span></th>
      <th class="col-score">AI<br><span style="font-weight:400;color:var(--muted)">15%</span></th>
      <th class="col-score">Weighted<br><span style="font-weight:400;color:var(--muted)">Score</span></th>
      <th>Decision</th><th>Notes</th><th></th>
    </tr></thead>
    <tbody>${rows}</tbody>
  </table></div>`;
}

function toggleNotes(id) {
  const inner = document.getElementById('notes-inner-'+id);
  const btn = document.querySelector(`#row-${id} .cand-notes-toggle`);
  if (!inner) return;
  const open = inner.classList.toggle('open');
  if (btn) btn.textContent = open ? 'Notes ‚ñ¥' : 'Notes ‚ñæ';
}
function deleteCandidate(id) {
  candidateHistory = candidateHistory.filter(c=>c.id!==id);
  localStorage.setItem('recessCandidateHistoryV2',JSON.stringify(candidateHistory));
  updateCandidateBadge(); renderCandidateHistory();
}
function clearAllCandidates() {
  if (!candidateHistory.length) return;
  if (confirm('Clear all '+candidateHistory.length+' candidate records? This cannot be undone.')) {
    candidateHistory=[];
    localStorage.removeItem('recessCandidateHistoryV2');
    updateCandidateBadge(); renderCandidateHistory();
  }
}
function saveCandidate() {
  const name = document.getElementById('candidateName').value.trim();
  if (!name) {
    setSaveStatus('‚ö†Ô∏è Enter a candidate name first', 'var(--yellow)');
    document.getElementById('candidateName').focus();
    return;
  }
  const anyScore = [1,2,3,4,5].some(s => scores[s] !== null);
  if (!anyScore) {
    setSaveStatus('‚ö†Ô∏è Score at least one section first', 'var(--yellow)');
    return;
  }
  const recent = candidateHistory[0];
  if (recent && recent.name === name && (Date.now() - recent.id) < 5000) {
    setSaveStatus('‚úì Already saved', 'var(--green)');
    return;
  }
  saveCurrentCandidate();
  setSaveStatus('‚úì Saved ‚Äî view in All Candidates', 'var(--green)');
  const btn = document.getElementById('save-btn');
  btn.style.background = 'var(--green)'; btn.style.color = '#0d1117';
  setTimeout(() => { btn.style.background = 'var(--brand)'; btn.style.color = 'white'; }, 2000);
}

function setSaveStatus(msg, color) {
  const el = document.getElementById('save-status');
  el.textContent = msg; el.style.color = color;
  setTimeout(() => { el.textContent = ''; }, 4000);
}

function escHtml(str) { return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

window.onload = () => {
  ['script-1','script-2','script-3','script-4','script-5','tb-4'].forEach(id=>{
    const chev=document.getElementById('chev-'+id);
    if(chev) chev.classList.add('open');
  });
  updateCandidateBadge();
};
</script>
</body>
</html>
